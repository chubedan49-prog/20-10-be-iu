<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th∆∞ ch√∫c m·ª´ng</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Arial, sans-serif;
            overflow: hidden;
        }

        #heart-canvas {
            position: absolute;
            z-index: 1;
        }

        .letter-container {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease;
        }

        .letter-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .letter {
            background: rgba(234, 128, 176, 0.1);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(234, 128, 176, 0.3);
            backdrop-filter: blur(10px);
            max-width: 600px;
            margin: 20px;
            display: none;
        }

        .letter h2 {
            color: #ea80b0;
            font-size: 24px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(234, 128, 176, 0.5);
        }

        .letter p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.9);
            min-height: 29px; /* Prevent jumping when typing */
        }
        
        .signature {
            margin-top: 30px;
            color: #ea80b0;
            font-style: italic;
            text-shadow: 0 0 10px rgba(234, 128, 176, 0.3);
        }

        .continue-btn {
            background: linear-gradient(45deg, #ea80b0, #e665a2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(234, 128, 176, 0.3);
            display: none;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(234, 128, 176, 0.4);
            background: linear-gradient(45deg, #e665a2, #ea80b0);
        }

        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <canvas id="heart-canvas"></canvas>
    <div class="letter-container">
        <div class="letter floating">
            <h2>‚ú® G·ª≠i <span id="receiver-name"></span> ‚ú®</h2>
            <div id="letter-content"></div>
            <p class="signature">From ox c·ªßa di√™n :3 ‚ù§Ô∏è</p>
        </div>
        <button class="continue-btn">Ti·∫øp t·ª•c ‚ú®</button>
    </div>

    <script>
        // M·∫£ng c√°c l·ªùi ch√∫c kh√°c nhau
        const messages = [
            [
                "Nh√¢n ng√†y Ph·ª• n·ªØ Vi·ªát Nam 20/10",
                "Ch√∫c em b√© lu√¥n xinh ƒë·∫πp, h·∫°nh ph√∫c v√† th√†nh c√¥ng trong cu·ªôc s·ªëng",
                "M·ªói ng√†y ƒë·ªÅu tr√†n ng·∫≠p ni·ªÅm vui v√† nh·ªØng ƒëi·ªÅu tuy·ªát v·ªùi nh√©! üå∏",
            ],
            [
                "Nh√¢n ng√†y 20/10 ƒë·∫∑c bi·ªát n√†y",
                "Ch√∫c d·ª£ c√≥ m·ªôt ng√†y th·∫≠t nhi·ªÅu ni·ªÅm vui v√† ti·∫øng c∆∞·ªùi",
                "Lu√¥n t·ªèa s√°ng r·∫°ng ng·ªùi v√† g·∫∑t h√°i ƒë∆∞·ª£c nhi·ªÅu th√†nh c√¥ng trong cu·ªôc s·ªëng üåü",
            ],
            [
                "Happy Vietnamese Women's Day 20/10! üéâ",
                "Ch√∫c d·ª£ m√£i r·∫°ng ng·ªùi nh∆∞ nh·ªØng ƒë√≥a hoa t∆∞∆°i th·∫Øm",
                "Lu√¥n gi·ªØ n·ª• c∆∞·ªùi tr√™n m√¥i v√† h·∫°nh ph√∫c trong tim üå∫",
            ],
            [
                "G·ª≠i ƒë·∫øn d·ª£ nh·ªØng l·ªùi ch√∫c t·ªët ƒë·∫πp nh·∫•t nh√¢n ng√†y 20/10",
                "Ch√∫c d·ª£ lu√¥n m·∫°nh kh·ªèe, tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng",
                "V√† th·ª±c hi·ªán ƒë∆∞·ª£c t·∫•t c·∫£ nh·ªØng ∆∞·ªõc m∆° c·ªßa m√¨nh ‚ú®",
            ],
            [
                "Ng√†y 20/10 th·∫≠t ƒë·∫∑c bi·ªát v·ªõi em b√©",
                "Ch√∫c d·ª£ lu√¥n tr√†n ƒë·∫ßy h·∫°nh ph√∫c, ni·ªÅm vui v√† t√¨nh y√™u th∆∞∆°ng c·ª•a tuiiii",
                "M·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi d·ª£ üéÄ",
            ]
        ];

        // Ch·ªçn ng·∫´u nhi√™n m·ªôt b·ªô l·ªùi ch√∫c
        function getRandomMessage() {
            return messages[Math.floor(Math.random() * messages.length)];
        }

        // Hi·ªÉn th·ªã l·ªùi ch√∫c v·ªõi hi·ªáu ·ª©ng g√µ ch·ªØ
        async function typeMessages() {
            const letterContent = document.getElementById('letter-content');
            const selectedMessages = getRandomMessage();
            
            for (let message of selectedMessages) {
                const p = document.createElement('p');
                letterContent.appendChild(p);
                
                for (let char of message) {
                    p.textContent += char;
                    await new Promise(resolve => setTimeout(resolve, 50)); // T·ªëc ƒë·ªô g√µ ch·ªØ
                }
                await new Promise(resolve => setTimeout(resolve, 500)); // Delay gi·ªØa c√°c d√≤ng
            }
        }
        const canvas = document.getElementById('heart-canvas');
        const ctx = canvas.getContext('2d');
        const letter = document.querySelector('.letter');
        const letterContainer = document.querySelector('.letter-container');
        const continueBtn = document.querySelector('.continue-btn');
        const receiverName = document.getElementById('receiver-name');

        // Set canvas size
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Get user name from localStorage
        const userName = localStorage.getItem('userName');
        receiverName.textContent = userName;

        // Heart drawing parameters
        let t = 0;
        let points = [];
        const hearts = [];
        
        function createHeart() {
            return {
                x: canvas.width * Math.random(),
                y: canvas.height * Math.random(),
                size: 2 + Math.random() * 3,
                color: `hsl(${330 + Math.random() * 30}, 100%, ${70 + Math.random() * 20}%)`,
                angle: Math.random() * Math.PI * 2,
                speed: 1 + Math.random()
            };
        }

        // Initialize hearts
        for(let i = 0; i < 50; i++) {
            hearts.push(createHeart());
        }

        function drawHeart(x, y, size, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(x, y + size * 0.5);
            ctx.bezierCurveTo(
                x, y, 
                x - size * 2, y, 
                x - size * 2, y + size * 1.5
            );
            ctx.bezierCurveTo(
                x - size * 2, y + size * 3, 
                x, y + size * 3.5, 
                x, y + size * 2
            );
            ctx.bezierCurveTo(
                x, y + size * 3.5, 
                x + size * 2, y + size * 3, 
                x + size * 2, y + size * 1.5
            );
            ctx.bezierCurveTo(
                x + size * 2, y, 
                x, y, 
                x, y + size * 0.5
            );
            ctx.fill();
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            hearts.forEach(heart => {
                heart.y -= heart.speed;
                heart.angle += 0.02;
                drawHeart(
                    heart.x + Math.sin(heart.angle) * 20,
                    heart.y,
                    heart.size,
                    heart.color
                );

                if(heart.y < -20) {
                    heart.y = canvas.height + 20;
                }
            });

            // Draw main heart
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const size = 30;
            t += 0.05;
            
            const x = centerX + Math.sin(t) * 10;
            const y = centerY + Math.sin(t * 2) * 5;
            
            drawHeart(x, y, size, '#ea80b0');

            requestAnimationFrame(animate);
        }

        // Start animation and show content gradually
        window.onload = async () => {
            animate();
            
            setTimeout(async () => {
                letterContainer.classList.add('show');
                letter.style.display = 'block';
                await typeMessages(); // ƒê·ª£i hi·ªáu ·ª©ng g√µ ch·ªØ ho√†n th√†nh
                continueBtn.style.display = 'inline-block';
            }, 1000);
        };

        // Continue button click handler
        continueBtn.addEventListener('click', () => {
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>